<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="InfiniDepth Debug Page for Screen Recording">
    <meta name="author" content="Hao Yu">
    <title>InfiniDepth - Debug Version</title>
    
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- InfiniDepth Styles -->
    <link href="css/infinidepth/main.css" rel="stylesheet">
    <link href="css/infinidepth/magnifier.css" rel="stylesheet">
    
    <style>
        /* Override styles for debug layout - side by side RGB and single depth */
        .interactive-comparison {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            justify-content: center;
        }
        
        .rgb-side {
            position: relative;
            flex: 0 0 auto;
            max-width: 50%;
        }
        
        .rgb-side img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .depth-side-single {
            position: relative;
            flex: 0 0 auto;
            max-width: 50%;
        }
        
        .depth-side-single canvas {
            display: block;
            width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .depth-label-single {
            text-align: center;
            margin-top: 10px;
            font-weight: 500;
            color: #333;
        }
        
        .keyboard-hint {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px 20px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 14px;
            color: #495057;
        }
        
        .keyboard-hint kbd {
            background-color: #fff;
            border: 1px solid #adb5bd;
            border-radius: 3px;
            box-shadow: 0 1px 0 rgba(0,0,0,0.2);
            padding: 2px 6px;
            font-size: 13px;
            margin: 0 3px;
        }
    </style>
</head>

<body>
    <!-- Cover Section -->
    <section>
        <div class="jumbotron text-center mt-0">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2>InfiniDepth - Debug Version for Screen Recording</h2>
                        <p class="text-muted">Simplified interface with keyboard zoom control</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-card">
                        <!-- Keyboard Control Hint -->
                        <div class="keyboard-hint">
                            <strong>Keyboard Controls:</strong> 
                            Press <kbd>+</kbd> or <kbd>=</kbd> to zoom in | 
                            Press <kbd>-</kbd> to zoom out | 
                            Hover over RGB image to compare depth
                        </div>
                        
                        <!-- Case Navigation -->
                        <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px;">
                            <button id="prevCase" class="case-nav-btn" style="padding: 8px 16px; background-color: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s;">
                                ← Previous
                            </button>
                            <button id="nextCase" class="case-nav-btn" style="padding: 8px 16px; background-color: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s;">
                                Next →
                            </button>
                        </div>
                        
                        <!-- Interactive Comparison with Magnifier -->
                        <div class="interactive-comparison">
                            <!-- Left: RGB Image -->
                            <div class="rgb-side" id="rgbSide">
                                <img src="images/pub/infinidepth/DSC_0250.png" class="rgb-image" id="rgbImage" alt="RGB Image">
                                <div class="magnifier-lens" id="magnifierLens"></div>
                                <div class="zoom-info" id="zoomInfo">Patch Size: 256×256</div>
                            </div>
                            
                            <!-- Right: Single Depth Map -->
                            <div class="depth-side-single">
                                <canvas id="depthCanvas"></canvas>
                                <div class="depth-label-single" id="depthLabel">InfiniDepth (Ours)</div>
                            </div>
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center" style="margin-bottom: 10px; margin-top: 20px;">
        <p>
            © 2025 Hao Yu. All rights reserved.<br>
            <a href="infinidepth.html">← Back to Main Demo</a> | 
            <a href="index.html">Back to Homepage</a>
        </p>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- InfiniDepth Scripts -->
    <script src="js/infinidepth/config_debug.js"></script>
    <script src="js/infinidepth/magnifier_debug.js"></script>
    <script src="js/infinidepth/auto_recorder.js"></script>
    
    <!-- Initialize Auto Recorder -->
    <script>
        // Wait for magnifier to be initialized
        window.addEventListener('load', () => {
            // Give magnifier time to initialize
            setTimeout(() => {
                if (window.depthMagnifier) {
                    // Create auto recorder instance
                    window.autoRecorder = new AutoRecorder(window.depthMagnifier, {
                        moveSpeed: 0.2,          // Faster movement for demo
                        zoomSpeed: 1.0,          // Faster zoom for demo
                        pauseAtAnchor: 500,      // Short pause at anchor
                        pauseAtZoom: 1200,       // Pause at max zoom
                        pauseAfterZoomOut: 500,  // Short pause after zoom out
                        maxZoomLevel: 0.12,      // Maximum zoom level
                        moveEasing: 'easeInOutCubic',
                        zoomEasing: 'easeInOutQuad'
                    });
                    console.log('Auto Recorder initialized');
                } else {
                    console.error('Depth magnifier not found');
                }
            }, 1000);
        });
    </script>
</body>
</html>
